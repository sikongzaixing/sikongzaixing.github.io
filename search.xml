<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>test</title>
      <link href="/2019/06/04/test/"/>
      <url>/2019/06/04/test/</url>
      
        <content type="html"><![CDATA[<h1 id="Hexo-加入图片无法显示–解决方案"><a href="#Hexo-加入图片无法显示–解决方案" class="headerlink" title="Hexo 加入图片无法显示–解决方案"></a>Hexo 加入图片无法显示–解决方案</h1><p><img src="//sikongzaixing.github.io/2019/06/04/test/test.png" alt="image"></p><h5 id="1、插件安装与配置"><a href="#1、插件安装与配置" class="headerlink" title="1、插件安装与配置,"></a>1、插件安装与配置,</h5><p>首先我们需要安装一个图片路径转换的插件，这个插件名字是 <strong>hexo-asset-image</strong></p><p>​    <code>sudo npm install https://github.com/CodeFalling/hexo-asset-image --save</code></p><h5 id="2、核心部分-需要修改-index-js文件"><a href="#2、核心部分-需要修改-index-js文件" class="headerlink" title="2、核心部分,需要修改 index.js文件"></a>2、核心部分,需要修改 index.js文件</h5><pre><code>&apos;use strict&apos;;</code></pre><p>var cheerio = require(‘cheerio’);</p><p><code>// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</code><br><code>function getPosition(str, m, i) {</code><br>  <code>return str.split(m, i).join(m).length;</code><br><code>}</code></p><p><code>var version = String(hexo.version).split(&#39;.&#39;);</code><br><code>hexo.extend.filter.register(&#39;after_post_render&#39;, function(data){</code><br>  <code>var config = hexo.config;</code><br>  <code>if(config.post_asset_folder){</code><br>    <code>var link = data.permalink;</code><br>  <code>if(version.length &gt; 0 &amp;&amp; Number(version[0]) == 3)</code><br>     <code>var beginPos = getPosition(link, &#39;/&#39;, 1) + 1;</code><br>  <code>else</code><br>    <code>var beginPos = getPosition(link, &#39;/&#39;, 3) + 1;</code><br>    <code>// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.</code><br>      <code>var endPos = link.lastIndexOf(&#39;/&#39;) + 1;</code></p><pre><code>link = link.substring(beginPos, endPos) ;var toprocess = [&apos;excerpt&apos;, &apos;more&apos;, &apos;content&apos;];for(var i = 0; i &lt; toprocess.length; i++){  var key = toprocess[i];  var $ = cheerio.load(data[key], {    ignoreWhitespace: false,    xmlMode: false,    lowerCaseTags: false,    decodeEntities: false  });  $(&apos;img&apos;).each(function(){    if ($(this).attr(&apos;src&apos;)){      // For windows style path, we replace &apos;\&apos; to &apos;/&apos;.      var src = $(this).attr(&apos;src&apos;).replace(&apos;\\&apos;, &apos;/&apos;);      if(!/http[s]*.*|\/\/.*/.test(src) &amp;&amp; !/^\s*\//.test(src)) {        // For &quot;about&quot; page, the first part of &quot;src&quot; can&apos;t be removed.        // In addition, to support multi-level local directory.        var linkArray = link.split(&apos;/&apos;).filter(function(elem){          return elem != &apos;&apos;;        });        var srcArray = src.split(&apos;/&apos;).filter(function(elem){          return elem != &apos;&apos; &amp;&amp; elem != &apos;.&apos;;        });        if(srcArray.length &gt; 1)        srcArray.shift();        src = srcArray.join(&apos;/&apos;);        $(this).attr(&apos;src&apos;, config.root + link + src);        console.info&amp;&amp;console.info(&quot;update link as:--&gt;&quot;+config.root + link + src);      }    }else{      console.info&amp;&amp;console.info(&quot;no src attr, skipped...&quot;);      console.info&amp;&amp;console.info($(this));    }  });  data[key] = $.html();}</code></pre><p>  <code>}</code><br><code>});</code></p><h5 id="3、打开-config-yml文件，修改下述内容"><a href="#3、打开-config-yml文件，修改下述内容" class="headerlink" title="3、打开_config.yml文件，修改下述内容"></a>3、打开_config.yml文件，修改下述内容</h5><p>​    <code>post_asset_folder: true</code></p><p>​    <code>url: http://localhost:4000/</code>修改为对应的地址</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2019/06/01/hello-world/"/>
      <url>/2019/06/01/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
